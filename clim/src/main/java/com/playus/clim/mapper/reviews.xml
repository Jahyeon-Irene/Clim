<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="reviews">
	
	<select id="myWriteReviewsList" resultType="Review" parameterType="PageVO">
		SELECT no, movieNo, memberNo, contents, score, regdate, title, r 
		FROM(SELECT no, movieNo, memberNo, contents, score, regdate, title, rownum r 
			 FROM(SELECT r.no, movie_no movieNo, member_no memberNo, r.contents, r.score, r.regdate, m.title
				  FROM reviews r, movies m
				  WHERE r.member_no = #{memberNo}
				  AND m.no = r.movie_no
				  ORDER BY regdate DESC))
		WHERE r BETWEEN #{start} AND #{end}
	</select>
	
	<select id="myWriteReviewsTotal" resultType="int" parameterType="int">
		SELECT count(*)
		FROM reviews
		WHERE member_no = #{memberNo}
	</select>
	
</mapper>