<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="climingLists">

	<!-- clim번호(방번호)로 climingList 출력( 방제, 방장닉네임, 방송시작시간, 방송종료시간) -->
	<select id="selectList"  resultType="ClimingList">
		SELECT no, title, nickname, clim_no climNo, viewCount viewerCount 
		FROM(SELECT cl.no no, cl.title, mb.nickname
				FROM c_Lists cl, members mb
				WHERE cl.member_no = mb.no
				AND close_time IS NULL ) c,
			(SELECT clim_no, COUNT(*) viewCount
				FROM c_logs
			WHERE close_time IS NULL
			GROUP BY clim_no) m
		WHERE c.no = m.clim_no(+)
	</select>

	<select id="selectFeatures" resultType="Movie" parameterType="Feature">
		
	</select>
</mapper>