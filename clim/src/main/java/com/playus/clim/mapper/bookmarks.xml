<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="bookmarks">
	
	<select id="mybookmarkListForCliming" parameterType="int" resultType="Bookmark">
		SELECT b.no, b.member_no memberNo, m.title, m.poster, m.runtime, b.regdate, b.type
		FROM BOOKMARKS b, MOVIES m
		WHERE b.movie_no = m.no
		AND b.type = 'C'
		AND b.member_no = #{memberNo}
		ORDER BY regdate
	</select>
	
	<insert id="bookmarkInsertForCliming" parameterType="Bookmark">
		INSERT INTO bookmarks(no, member_no, movie_no, regdate, type)
		VALUES (bookmarks_seq.nextval, #{memberNo}, #{movieNo}, SYSTIMESTAMP, 'C')
	</insert>
	
	<delete id="bookmarkDeleteForCliming" parameterType="int">
		DELETE bookmarks
		WHERE no = #{no}
	</delete>
	
	<select id="checkBookmarkOneForCliming" parameterType="Bookmark" resultType="Bookmark">
		SELECT no,member_no memberNo, movie_no movieNo, regdate, type
		FROM bookmarks
		WHERE member_no = #{memberNo}
		AND movie_no = #{movieNo}
		AND type = 'C'
	</select>
	
</mapper>